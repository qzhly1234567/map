<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <style>
        html,
        body,
        #container {
            width: 100vw;
            height: 100vh;
        }
    </style>
</head>
<body>
<div id="container"></div>

<script>
  window._AMapSecurityConfig = {
    securityJsCode: "8ec0a13f9efd6705e00b339fa29453b2",
  };

</script>
<script src="https://webapi.amap.com/loader.js"></script>
<script src="./index.js"></script>
<script type="text/javascript">

  AMapLoader.load({
    key: "c89c2ef731407d06c9da03308085d6b0", //申请好的Web端开发者 Key，调用 load 时必填
    version: "1.4.15", //指定要加载的 JS API 的版本，缺省时默认为 1.4.15
  })
    .then((AMap) => {
      const map = new AMap.Map("container", {
        viewMode: "2D",
        // pitch: 50,
        pitch: 0,
        zoom: 19,
        center: [108.962636, 34.216242],
      });

      const path2 = [
        [108.961888, 34.215844],
        [108.96189, 34.215981],
        [108.962502, 34.215988],
        [108.962682, 34.216063],
        [108.962692, 34.21625],
        [108.962612, 34.216252],
      ];

      var path = [
          [108.962304, 34.21599],
          [108.962319, 34.216411],
          [108.962769, 34.216441],
          [108.962667, 34.21692],
          [108.962308, 34.217132],
          [108.961681, 34.217099],
          [108.961557, 34.216475],
          [108.961791, 34.216026],
        ]
      ;

      // addLine({ AMap, map, path });
      addLine({ AMap, map, path: path2 });
      AMap.plugin(['AMap.ControlBar'], function () {
        map.addControl(new AMap.ControlBar({
          position: {
            top: '10px',
            right: '10px'
          }
        }));
      });

      let att = [];
      map.on('click', (e) => {
        let a = [e.lnglat.lng, e.lnglat.lat];
        att.push(a);
        console.log(att);
      });

    })
    .catch((e) => {
      console.error(e); //加载错误提示
    });
  window.addEventListener('click', function (e) {
    setTimeout(function () {
      document.querySelector('.floor-list').childNodes.forEach(function (el) {
        if (el.className.includes('selected')) {
          console.log(el.innerText);
        }
      });
    }, 1000);
  });

</script>
</body>
</html>
